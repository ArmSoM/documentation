---
sidebar_label: "8. FAN 接口"
slug: /interface-usage/fan
sidebar_position: 8
---

# 8. FAN 接口

## 8.1 接口型号与连接

- 座子封装是 0.8立贴(0.8mm 1x3P 直插)，网盘连接器规格书有详细规格书
- 支持5V供电的风扇
- 支持PWM

ArmSoM 产品都标配该风扇接口

![sige5-fan](/img/general-tutorial/interface-usage/fan.png)

| 风扇    | 引脚       | 功能            | 
| -------| ----------| ----------------|
| 5v     | 1          | 5V电源          |
| GND    | 2          | 地（Ground）    |
| PWM    | 3          | PWM控制信号     |

**说明：**
- **5V电源 (Pin 1)**：为风扇提供5V的电源。
- **地 (Pin 2)**：风扇的地线，用于电路的回路。
- **PWM控制信号 (Pin 3)**：通过PWM信号控制风扇的转速。占空比的变化会直接影响风扇的运行速度。

## 8.2 使用FAN

目前风扇默认五个状态

| 温度       | 状态  | PWM转速 |
| --------------- | ----- | ------ |
| 小于50° | 0 | 0 |
| 50°-55°  | 1 | 50 |
| 55°-60° | 2 | 100 |
| 60°-65° | 3 | 150 |
| 65°-70° | 4 | 200 |
| 70°以上 | 5 | 250 |

### 8.2.1 确认 PWM 风扇设备已被识别

重启后，你可以通过以下命令检查风扇设备是否已经识别并正确配置：

```
root@armsom-sige5:/home/armsom# ls /sys/class/thermal/
```

如果设备树中的 pwm-fan 配置成功，你应该能够看到一个类似 thermal_zoneX 的目录，其中包含风扇控制的相关信息。

### 8.2.1 调节温度和风扇速度

风扇的速度由温度控制，当系统温度达到某个阈值时，系统会自动调整风扇的转速。你可以手动模拟温度变化来测试风扇是否工作。

你可以通过 thermal 子系统控制温度策略。例如，你可以使用如下命令查看当前温度状态：

```
root@armsom-sige5:/home/armsom# cat /sys/class/thermal/thermal_zone0/temp
```

如果温度高于某个阈值，系统会自动调节风扇的速度。例如，你可以通过压力测试使芯片的温度迅速上升，以验证风扇的工作状态：

```
root@armsom-sige5:/home/armsom# stress --cpu 4 
```
